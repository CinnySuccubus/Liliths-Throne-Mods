<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<combatMove>
	<!-- GENERAL INFORMATION: If you are unsure of anything, please use the LT Discord to ask for help! -->

	<category>SPECIAL</category>

	<type>ATTACK</type>

	<equipWeighting>10</equipWeighting>

	<name><![CDATA[Stampede]]></name>

	<description><![CDATA[
		Give in to [npc.her] instinct and run straight through [npc.her] target, dealing formattedDamageInflicted damage.
	]]></description>

	<damageType><![CDATA[
		PHYSICAL
	]]></damageType>

	<baseDamage><![CDATA[
			#IF(!npc.isLegMovementHindered())
				[#npc.getUnarmedDamage()*3]
			#ELSE
				[#npc.getUnarmedDamage()]
			#END
	]]></baseDamage>

	<blockAmount><![CDATA[
		0
	]]></blockAmount>

	<cooldown><![CDATA[
		5
	]]></cooldown>

	<APcost><![CDATA[
		3
	]]></APcost>

	<canTargetEnemies>true</canTargetEnemies>
	<canTargetAllies>false</canTargetAllies>
	<canTargetSelf>false</canTargetSelf>

	<imageName>stampede.svg</imageName>

	<colourPrimary>DAMAGE_TYPE_PHYSICAL</colourPrimary>
	<colourSecondary/>
	<colourTertiary/>

	<statusEffects>
		<effect turnLength="5" onCrit="true">CRIPPLE</effect>
	</statusEffects>

	<availabilityCondition><![CDATA[
		[#npc.getRace()==RACE_cinnysuccubus_elephant]
	]]>
	</availabilityCondition>

	<availabilityDescription><![CDATA[
		Available to elephant characters.
	]]></availabilityDescription>

	<weighting><![CDATA[
		#IF(!npc.isLegMovementHindered())
			0.25
		#ELSE
			1.0
		#ENDIF
	]]></weighting>

	<criticalCondition><![CDATA[
		[combat.getEnemies(npc).size() => 3]
	]]></criticalCondition>

	<criticalDescription><![CDATA[
		Used against a group of 3 targets or more.
	]]></criticalDescription>

	<movePredictionDescriptionWithTarget><![CDATA[
		Give into [npc.her] instinct to charge straight through [npc2.name], dealing formattedDamageInflicted damage.
		#IF(!npc.isLegMovementHindered())
			 [style.italicsMinorBad(Damage is reduced by 50% as [npc.her] clothing is hindering leg movement!)]
		#ENDIF
	]]></movePredictionDescriptionWithTarget>

	<movePredictionDescriptionNoTarget><![CDATA[
		Give into [npc.her] instinct to charge straight through [npc.her] target, dealing formattedDamageInflicted damage.
		#IF(!npc.isLegMovementHindered())
			 [style.italicsMinorBad(Damage is reduced by 50% as [npc.her] clothing is hindering leg movement!)]
		#ENDIF
	]]></movePredictionDescriptionNoTarget>
	
	<performMove>
		<execute><![CDATA[
			#IF(!npc.isLegMovementHindered())
				[npc.Name] [npc.verb(give)] in to [npc.her] instinct, and after letting out a loud bellow, [npc.verb(charge)] through [npc2.name]!
			#ELSE
				[npc.Name] [npc.verb(give)] in to [npc.her] instinct, and [npc.verb(run)] through [npc2.name]!
			#ENDIF
			formattedHealthDamage
		]]></execute>
		<!-- <execute><![CDATA[
				[##var outputText = ""]
				[##function damageEnemy(x) {
				if (outputText != "") {outputText = outputText + "<br>";}
				if(!x.isPlayerKnowsName()) {outputText = outputText + "The ";}    
				outputText = outputText + x.getName() + " is the enemy.";}]
				[##combat.getEnemies(npc).forEach(damageEnemy)]
				[#outputText]
		]]></execute> -->
		<critDescription><![CDATA[
			[npc.NamePos] stampede was extremely effective!
		]]></critDescription>
		<critEffectDescription><![CDATA[
			[npc2.Name] [npc2.has] been crippled by the attack!
		]]></critEffectDescription>
	</performMove>
	
</combatMove>
